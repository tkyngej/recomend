<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>リアルタイム検索</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      padding: 1rem;
      line-height: 1.6;
    }
    label, select, input {
      display: block;
      width: 100%;
      margin: 1rem 0 0.5rem;
      font-size: 1.1rem;
      padding: 0.6rem;
    }
    button {
      width: 100%;
      font-size: 1.2rem;
      padding: 1rem;
      background-color: #4CAF50;
      color: white;
      border: none;
      border-radius: 6px;
      margin-top: 2rem;
    }
    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>

  <h2>好みと地域でリアルタイム検索</h2>

  <label for="genre">ジャンルを選ぶ：</label>
  <select id="genre" onchange="updateOptions()">
    <option value="">選択してください</option>
    <option value="movie">映画</option>
    <option value="anime">アニメ</option>
    <option value="manga">漫画</option>
    <option value="novel">小説</option>
    <option value="supplement">サプリメント</option>
    <option value="food">飲食店</option>
    <option value="shopping">通販</option>
    <option value="event">地域イベント</option>
  </select>

  <label for="subgenre">カテゴリを選ぶ：</label>
  <select id="subgenre"></select>

  <label for="feature">特徴を選ぶ：</label>
  <select id="feature"></select>

  <label for="preference">好きなもの・嫌いなもの：</label>
  <input type="text" id="preference" placeholder="例：恋愛は嫌い、感動系が好き">

  <label for="location">地域（例：長崎市）</label>
  <input type="text" id="location" placeholder="例：長崎市">

  <button onclick="search()">検索する</button>

  <script>
    const options = {
      movie: {
        sites: ['site:eiga.com', 'site:eigakan.org'],
        sub: ['邦画', '洋画', 'アニメ映画', '短編映画'],
        feature: ['感動系', '泣ける', '元気が出る', '怖い', '笑える', '実話ベース']
      },
      anime: {
        sites: ['site:myanimelist.net', 'site:animestore.docomo.ne.jp'],
        sub: ['TVシリーズ', '映画版', 'OVA', '配信限定'],
        feature: ['感動系', '日常系', '戦闘系', 'ラブコメ', 'ギャグ', '鬱展開']
      },
      manga: {
        sites: ['site:comic.pixiv.net', 'site:comicwalker.com'],
        sub: ['少年マンガ', '少女マンガ', '青年マンガ', 'Web漫画'],
        feature: ['バトル', '恋愛', '日常', '社会派', 'ギャグ', '感動系']
      },
      novel: {
        sites: ['site:bookmeter.com', 'site:note.com'],
        sub: ['恋愛小説', '推理小説', '短編集', 'エッセイ'],
        feature: ['泣ける', '深いテーマ', '軽め', 'ホラー', '純文学風', '映像化原作']
      },
      supplement: {
        sites: ['site:iherb.com', 'site:vitacost.com'],
        sub: ['ビタミン系', '睡眠系', '集中力系', '美容系', '健康維持'],
        feature: ['疲労回復', '肌ケア', '脳活性', '運動サポート', '脂肪燃焼']
      },
      food: {
        sites: ['site:tabelog.com', 'site:retty.me'],
        sub: ['カフェ', 'ラーメン', '定食屋', '居酒屋', 'スイーツ'],
        feature: ['一人OK', '落ち着く', 'ボリューム重視', '無添加', '英語メニューあり', 'インスタ映え']
      },
      shopping: {
        sites: ['site:amazon.co.jp', 'site:rakuten.co.jp'],
        sub: ['家電', '日用品', 'ファッション', '小物', '文房具'],
        feature: ['安い', 'おしゃれ', '人気ランキング', 'ギフト向け', '高性能']
      },
      event: {
        sites: ['site:peatix.com', 'site:eventernote.com'],
        sub: ['音楽', '展示会', 'ワークショップ', '地域祭り', '講演会'],
        feature: ['子供向け', '大人向け', '無料', '屋内', '週末開催']
      }
    };

    function updateOptions() {
      const genre = document.getElementById('genre').value;
      const subSelect = document.getElementById('subgenre');
      const featureSelect = document.getElementById('feature');

      subSelect.innerHTML = '';
      featureSelect.innerHTML = '';

      if (options[genre]) {
        options[genre].sub.forEach(item => {
          const opt = document.createElement('option');
          opt.text = item;
          subSelect.add(opt);
        });

        options[genre].feature.forEach(item => {
          const opt = document.createElement('option');
          opt.text = item;
          featureSelect.add(opt);
        });
      }
    }

    function search() {
      const genre = document.getElementById('genre').value;
      const sub = document.getElementById('subgenre').value;
      const feature = document.getElementById('feature').value;
      const preference = document.getElementById('preference').value;
      const location = document.getElementById('location').value;

      if (!genre || !options[genre]) {
        alert('ジャンルを選んでください');
        return;
      }

      const sites = options[genre].sites.join(' OR ');
      const query = `${sub} ${feature} ${preference} ${location} (${sites})`;
      const url = `https://www.google.com/search?q=${encodeURIComponent(query)}`;
      window.open(url, '_blank');
    }
  </script>
</body>
</html>
